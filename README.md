# dy_lottery_helper
## 程序特色:
1.采用多种方式查找合适的直播间，不依赖于解密算法避免了需要频繁更新算法的问题

2.遵循’少即是多’原则，不频繁切换直播间，严格筛选更容易中的福袋，虽然无法避免被风控，但是尽可能缩短了被风控的时间

3.会参与粉丝团福袋，利用付费行为提高了每日可中钻石数量的上限，顺便也能提升你的消费等级

4.程序带有被风控检测，如果检测到可能处于被风控状态，会更加严格地筛选福袋以减少福袋的参与，避免更严重的黑号情况，同时尽可能减少了因参与粉丝团福袋导致的钻石损失的情况
## 程序效果(到目前为止最好的效果):
<img width="1318" height="952" alt="0_today" src="https://github.com/user-attachments/assets/c8c9d73a-c922-46b9-bb05-f1bca8e19370" />

## 2025/09/29
## 版本2.4.2
1.略微调整了通过类别查找直播间的查找范围

2.修复了由于日期变更导致最新的lottery_info文件更新失败的bug

## 2025/09/28
## 版本2.4.1
1.增加了VIP功能’符合条件时切换账号’，该功能会在符合某些条件时来回切换你的抖音账号，现版本VIP用户拥有的功能:(1)设置福袋筛选概率;(2)筛选福袋类型;(3)自定义被风控规则;(4)符合条件时切换账号

2.优化了查看所停留直播间福袋的逻辑

## 2025/09/28
## 版本2.4.0
1.增加了lottery_info记录的内容

2.优化了记录直播间的逻辑

3.优化了浏览器操作逻辑

4.修复了查找直播间的算法会因接口返回数据异常而停止查找的bug

5.修复了因更新room_id而导致异常关闭左边浏览器第一个标签页的bug

## 2025/09/26
## 版本2.3.0
1.增加了lottery_info记录的内容

2.优化了查找直播间的算法

3.修复了一部分符合条件的福袋没有被正确记录以及参与的bug

4.修复了record3.json文件中一些直播间的room_id没有被正确更新的bug

## 2025/09/24
## 版本2.2.0
1.优化了查找直播间的算法

2.修复了左边浏览器窗口无法找到福袋的bug

## 2025/09/22
## 版本2.1.2
1.**优化了被风控判断逻辑**，变更为’当本次钻石收益/今日钻石收益<=-5时或本次抽中福袋的频率<0.1时会触发该检测，同时提高粉丝团福袋的筛选概率’

2.修复了VIP功能无法正常使用的bug，并添加了VIP功能’自定义被风控判断规则’，现版本VIP用户拥有的功能:(1)设置福袋筛选概率;(2)筛选福袋类型;(3)自定义被风控规则

## 2025/09/21
## 版本2.1.1
解决了selenium使用switch_to.window方法时会抢夺窗口焦点的问题，但仍保留了键盘监听事件

如果浏览器仍然会抢夺窗口焦点，请尝试重启程序

## 2025/09/19
## 版本2.1.0
1.修复了一些bug

2.添加了一些VIP功能，在’账号说明’中有提到，**VIP用户搜索到的直播间会更加优质**

3.添加了**键盘事件监听**，解决了浏览器窗口会被强制放在最前面造成电脑使用不便的问题。你可以按下’1’键来隐藏浏览器，但不要频繁按下’1’键，有时候监听会失灵。你可以按下’f2’键取消键盘事件监听

**注意:被隐藏的浏览器仍然会占用窗口焦点，这意味着如果你需要频繁地使用键盘，十分不建议运行该程序！！！(鼠标操作影响不大)**

**还是建议你在服务器上或者虚拟机上运行该程序！**

## 2025/09/17
## 版本2.0.0
对未发布的初始版本1.0.0进行了重构

## 程序功能:

1.尽可能**模拟了真实用户抢福袋**，并运用了一定程度的**反反爬措施**，以尽可能减少被风控的可能性和风控时间

2.会**自动抢指定类型(发送评论/粉丝团福袋)的福袋**，暂不支持抢其它类型的福袋

福袋筛选概率(大于指定数值时会抢):

发送评论 -> 0.1

粉丝团 -> 0.2 + math.log(未中福袋的数量, 2)/100 + 中福袋的数量/100 

(被风控状态下->0.3 + math.log(未中福袋的数量, 2)/100 + 中福袋的数量/100)

**暂不支持只抢某种类型的福袋以及修改某种类型的福袋的筛选概率**

3.一些**福袋抽奖记录**(加入粉丝团/抽中了福袋)会保存至_internal/lottery/xxx.json下，0_today.json记录了今天的福袋抽奖记录

4.添加了'**被风控检测**'，当本次钻石收益/今日钻石收益<-10时会触发该检测，同时提高粉丝团福袋的筛选概率

## 目前版本无法解决的问题:
> [!WARNING]
> **程序运行时会频繁将浏览器窗口放在最前面。**

> [!TIP]
> **可能的解决方法:**\
> \
> 1.部署到服务器上\
> \
> 2.部署到虚拟机上

**如果不采用以上方法，请在不使用电脑的情况下运行该程序，不然会影响电脑使用体验！**
